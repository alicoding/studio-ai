<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Claude Studio - Projects</title>
    <link rel="stylesheet" href="styles.css">
    <!-- xterm.js for terminal -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/xterm@5.3.0/css/xterm.css">
</head>
<body>
    <!-- Navigation Bar -->
    <nav class="nav-bar">
        <div class="nav-brand">Claude Studio</div>
        <div class="nav-links">
            <a href="index.html" class="nav-link active">Projects</a>
            <a href="agents.html" class="nav-link">Agents</a>
            <a href="teams.html" class="nav-link">Teams</a>
        </div>
        <button class="settings-btn" title="Settings">‚öôÔ∏è</button>
    </nav>

    <!-- Project Tabs -->
    <div class="project-tabs">
        <div class="tab active" data-project="project-1">
            <span class="tab-name">Project Alpha</span>
            <span class="tab-close">√ó</span>
        </div>
        <div class="tab" data-project="project-2">
            <span class="tab-name">Project Beta</span>
            <span class="tab-close">√ó</span>
        </div>
        <button class="new-project-btn">+ New Project</button>
    </div>

    <div class="main-container">
        <!-- Sidebar with Agent Cards -->
        <aside class="sidebar" id="sidebar">
            <div class="sidebar-header">
                <h2>Team Agents</h2>
                <button class="sidebar-toggle">‚óÄ</button>
            </div>
            
            <div class="agent-list">
                <!-- Agent Card 1 -->
                <div class="agent-card" data-agent-id="orchestrator1" data-status="online">
                    <div class="agent-header">
                        <span class="status-indicator"></span>
                        <span class="agent-name">orchestrator1</span>
                        <span class="agent-role">orchestrator</span>
                    </div>
                    <div class="agent-body">
                        <div class="token-usage">
                            <div class="token-bar" style="width: 45%"></div>
                            <span class="token-text">90K / 200K tokens</span>
                        </div>
                        <div class="last-message">Planning next steps for the UI...</div>
                    </div>
                    <div class="agent-actions">
                        <button class="action-btn pause">‚è∏</button>
                        <button class="action-btn clear">üóë</button>
                        <button class="action-btn remove" title="Remove from team">üóë</button>
                    </div>
                </div>

                <!-- Agent Card 2 -->
                <div class="agent-card" data-agent-id="dev1" data-status="busy">
                    <div class="agent-header">
                        <span class="status-indicator"></span>
                        <span class="agent-name">dev1</span>
                        <span class="agent-role">dev</span>
                    </div>
                    <div class="agent-body">
                        <div class="token-usage">
                            <div class="token-bar" style="width: 30%"></div>
                            <span class="token-text">60K / 200K tokens</span>
                        </div>
                        <div class="last-message">Implementing the message queue...</div>
                    </div>
                    <div class="agent-actions">
                        <button class="action-btn pause">‚è∏</button>
                        <button class="action-btn clear">üóë</button>
                        <button class="action-btn remove" title="Remove from team">üóë</button>
                    </div>
                </div>

                <!-- Agent Card 3 -->
                <div class="agent-card" data-agent-id="ux1" data-status="online">
                    <div class="agent-header">
                        <span class="status-indicator"></span>
                        <span class="agent-name">ux1</span>
                        <span class="agent-role">ux</span>
                    </div>
                    <div class="agent-body">
                        <div class="token-usage">
                            <div class="token-bar" style="width: 10%"></div>
                            <span class="token-text">20K / 200K tokens</span>
                        </div>
                        <div class="last-message">Ready for design review</div>
                    </div>
                    <div class="agent-actions">
                        <button class="action-btn pause">‚è∏</button>
                        <button class="action-btn clear">üóë</button>
                        <button class="action-btn remove" title="Remove from team">üóë</button>
                    </div>
                </div>

                <!-- Agent Card 4 (offline) -->
                <div class="agent-card" data-agent-id="tester1" data-status="offline">
                    <div class="agent-header">
                        <span class="status-indicator"></span>
                        <span class="agent-name">tester1</span>
                        <span class="agent-role">tester</span>
                    </div>
                    <div class="agent-body">
                        <div class="token-usage">
                            <div class="token-bar" style="width: 0%"></div>
                            <span class="token-text">0K / 200K tokens</span>
                        </div>
                        <div class="last-message">Offline</div>
                    </div>
                    <div class="agent-actions">
                        <button class="action-btn start">‚ñ∂</button>
                        <button class="action-btn clear">üóë</button>
                        <button class="action-btn remove" title="Remove from team">üóë</button>
                    </div>
                </div>
            </div>

            <div class="sidebar-footer">
                <button class="add-agent-btn">+ Add to Team</button>
                <button class="spawn-agent-btn">Create New Agent</button>
                <button class="team-template-btn">Load Team Template</button>
            </div>
        </aside>

        <!-- Main Content Area -->
        <main class="content-area">
            <!-- View Toggle -->
            <div class="view-controls" id="agent-view-controls">
                <button class="sidebar-toggle-main" title="Toggle Sidebar">‚ò∞</button>
                <button class="view-btn active" data-view="single">Single</button>
                <button class="view-btn" data-view="split">Split</button>
                <button class="view-btn" data-view="grid">Grid</button>
                <button class="view-btn" data-view="develop">Develop</button>
                <span class="selected-agent">‚Üí orchestrator1</span>
            </div>

            <!-- Main Work Area -->
            <div class="work-area" id="work-area">
                <!-- Agent Views (Single/Split/Grid) -->
                <div class="agent-workspace" id="agent-workspace">
                    <!-- Terminal Container -->
                    <div class="terminal-container" id="terminal-container">
                        <!-- Terminal will be dynamically created when agent is selected -->
                    </div>
                </div>
                
                <!-- Develop View -->
                <div class="develop-workspace" id="develop-workspace" style="display: none;">
                    <!-- Terminal Section (can be toggled) -->
                    <div class="develop-terminal-section" id="develop-terminal-section">
                        <div class="terminal-header">
                            <div class="terminal-tabs">
                                <button class="terminal-tab active" onclick="switchDevTerminal('server')">Server Terminal</button>
                                <button class="terminal-tab" onclick="switchDevTerminal('console')">Console</button>
                                <button class="terminal-tab" onclick="switchDevTerminal('test')">Tests</button>
                                <button class="terminal-tab-add" onclick="addDevTerminal()">+</button>
                            </div>
                            <button class="terminal-toggle-btn" onclick="toggleDevTerminal()" title="Hide/Show Terminal">
                                <span class="toggle-icon">‚ñº</span>
                            </button>
                        </div>
                        <div class="develop-terminal" id="develop-terminal"></div>
                    </div>
                    
                    <!-- Preview Section -->
                    <div class="develop-preview-section" id="develop-preview-section">
                        <div class="preview-header">
                            <div class="preview-status">
                                <span class="server-status" id="server-status">
                                    <span class="status-dot offline"></span>
                                    <span class="status-text">No server running</span>
                                </span>
                            </div>
                            <div class="preview-controls">
                                <input type="text" class="preview-url-input" id="preview-url" placeholder="http://localhost:3000" value="http://localhost:3000">
                                <button class="preview-btn" title="Connect" onclick="connectToServer()">üîå</button>
                                <button class="preview-btn" title="Refresh" onclick="refreshPreview()">üîÑ</button>
                                <button class="preview-btn" title="Open in New Tab" onclick="openPreviewInTab()">üîó</button>
                                <select class="preview-device-select" onchange="changePreviewDevice(this.value)">
                                    <option value="desktop">Desktop</option>
                                    <option value="tablet">Tablet (768px)</option>
                                    <option value="mobile">Mobile (375px)</option>
                                </select>
                            </div>
                        </div>
                        <div class="preview-content">
                            <div class="preview-placeholder" id="preview-placeholder">
                                <div class="placeholder-content">
                                    <h3>Development Server Not Connected</h3>
                                    <p>To preview your application:</p>
                                    <ol>
                                        <li>Open the terminal below</li>
                                        <li>Run your development server (e.g., <code>npm run dev</code>)</li>
                                        <li>Click Connect or it will auto-connect when server starts</li>
                                    </ol>
                                    <div class="common-commands">
                                        <h4>Common Commands:</h4>
                                        <code>npm run dev</code>
                                        <code>yarn dev</code>
                                        <code>python app.py</code>
                                        <code>rails server</code>
                                        <code>php -S localhost:8000</code>
                                    </div>
                                    <p style="margin-top: 20px; font-size: 12px; color: #888;">
                                        <strong>Note:</strong> For remote servers, ensure CORS is configured or use a proxy to avoid cross-origin issues.
                                    </p>
                                </div>
                            </div>
                            <iframe id="preview-iframe" src="about:blank" style="display: none;"></iframe>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Message Queue Display -->
            <div class="message-queue" id="message-queue">
                <div class="queue-header">
                    <span>Message Queue (2)</span>
                    <button class="clear-queue">Clear All</button>
                </div>
                <div class="queue-items">
                    <div class="queue-item">
                        <span class="queue-target">@dev1</span>
                        <span class="queue-message">implement the IPC handler</span>
                    </div>
                    <div class="queue-item">
                        <span class="queue-target">@ux1</span>
                        <span class="queue-message">review the mobile layout</span>
                    </div>
                </div>
            </div>

            <!-- Input Area -->
            <div class="input-area">
                <div class="input-wrapper">
                    <input type="text" 
                           class="message-input" 
                           id="message-input"
                           placeholder="Type a message or command (#team, @agent)..."
                           autocomplete="off">
                    <div class="input-actions">
                        <span class="input-hint">ESC to interrupt ‚Ä¢ Enter to send</span>
                        <button class="broadcast-btn" title="Broadcast to all">#broadcast</button>
                    </div>
                </div>
                
                <!-- @mention Autocomplete -->
                <div class="mention-autocomplete" id="mention-autocomplete" style="display: none;">
                    <div class="mention-item" data-agent="orchestrator1">
                        <span class="mention-status online"></span>
                        <span class="mention-name">@orchestrator1</span>
                        <span class="mention-role">(orchestrator)</span>
                    </div>
                    <div class="mention-item" data-agent="dev1">
                        <span class="mention-status busy"></span>
                        <span class="mention-name">@dev1</span>
                        <span class="mention-role">(dev)</span>
                    </div>
                    <div class="mention-item" data-agent="ux1">
                        <span class="mention-status online"></span>
                        <span class="mention-name">@ux1</span>
                        <span class="mention-role">(ux)</span>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- Agent Creation Modal (hidden by default) -->
    <div class="modal" id="create-agent-modal" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Create New Agent</h2>
                <button class="modal-close">√ó</button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label>Agent Name</label>
                    <input type="text" placeholder="e.g., dev_assistant">
                </div>
                <div class="form-group">
                    <label>Role</label>
                    <select>
                        <option>dev</option>
                        <option>architect</option>
                        <option>ux</option>
                        <option>tester</option>
                        <option>orchestrator</option>
                        <option>custom</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>System Prompt</label>
                    <textarea rows="6" placeholder="You are a specialized developer agent focused on..."></textarea>
                </div>
                <div class="form-group">
                    <label>Tool Access</label>
                    <div class="checkbox-group">
                        <label><input type="checkbox" checked> File System (Read/Write)</label>
                        <label><input type="checkbox" checked> Terminal Commands</label>
                        <label><input type="checkbox" checked> Web Search</label>
                        <label><input type="checkbox"> Database Access</label>
                        <label><input type="checkbox"> Production Deploy</label>
                    </div>
                </div>
                <div class="form-group">
                    <label>Model</label>
                    <select>
                        <option>Claude 3 Opus</option>
                        <option>Claude 3 Sonnet</option>
                        <option>Claude 3 Haiku</option>
                    </select>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn-secondary">Save as Template</button>
                <button class="btn-primary">Create & Spawn</button>
            </div>
        </div>
    </div>

    <!-- Load Scripts -->
    <script src="https://cdn.jsdelivr.net/npm/xterm@5.3.0/lib/xterm.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/xterm-addon-fit@0.8.0/lib/xterm-addon-fit.js"></script>
    <script src="mockup.js"></script>
</body>
</html>