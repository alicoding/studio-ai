#!/usr/bin/env node

async function testFetchCapabilities() {
  const API_BASE = process.env.CLAUDE_STUDIO_API || 'http://localhost:3456/api'
  
  console.log('Testing fetchCapabilities...')
  console.log('API_BASE:', API_BASE)
  
  try {
    const response = await fetch(`${API_BASE}/ai/capabilities`)
    console.log('Response status:', response.status, response.statusText)
    
    if (!response.ok) {
      console.error('Failed to fetch capabilities')
      return
    }
    
    const capabilities = await response.json()
    console.log('Capabilities fetched:', Object.keys(capabilities))
    
    for (const [id, cap] of Object.entries(capabilities)) {
      console.log(`- execute_${id}: ${cap.description} (${cap.models?.primary || 'default'})`)
    }
  } catch (error) {
    console.error('Error:', error)
  }
}

testFetchCapabilities()